<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Perangkat Jaringan - Informatika X</title>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#1e3c72,#2a5298);
color:white;
text-align:center;
margin:0;
padding:20px;
}

h1{margin-bottom:5px;}

.container{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:40px;
margin-top:20px;
}

.images,.functions{
display:flex;
flex-direction:column;
gap:12px;
}

img{
width:120px;
background:white;
padding:6px;
border-radius:10px;
cursor:grab;
}

.dropzone{
background:rgba(255,255,255,0.2);
padding:12px;
border-radius:10px;
min-height:50px;
width:320px;
font-size:14px;
}

.correct{background:#4caf50 !important;}
.wrong{background:#f44336 !important;}

#info{margin-top:15px;font-size:18px;}

input{
padding:8px;
border-radius:6px;
border:none;
}

button{
margin-top:10px;
padding:8px 15px;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
}
</style>
</head>
<body>

<h1>üì° Game Menjodohkan Perangkat Jaringan</h1>
<p>Seret gambar ke fungsi yang sesuai</p>

<div>
Nama Siswa:
<input type="text" id="namaSiswa" placeholder="Masukkan nama">
</div>

<div id="info">
‚ù§Ô∏è Nyawa: <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> |
üéØ Skor: <span id="score">0</span>
</div>

<div class="container">
<div class="images" id="imageContainer"></div>
<div class="functions" id="functionContainer"></div>
</div>

<button onclick="resetGame()">Main Lagi</button>
<button onclick="kirimNilai()">Kirim Nilai</button>

<script>
let score=0;
let lives=3;

const perangkat=[
{id:"router",img:"router.jpg",fungsi:"Menghubungkan dua jaringan berbeda"},
{id:"switch",img:"switch.jpg",fungsi:"Menghubungkan perangkat dalam LAN"},
{id:"modem",img:"modem.jpg",fungsi:"Mengubah sinyal digital & analog"},
{id:"accesspoint",img:"accesspoint.jpg",fungsi:"Menyediakan akses WiFi"},
{id:"repeater",img:"repeater.jpg",fungsi:"Memperkuat jangkauan sinyal"},
{id:"lancard",img:"lancard.jpg",fungsi:"Menghubungkan komputer ke jaringan"},
{id:"kabelutp",img:"kabelutp.jpg",fungsi:"Media transmisi kabel jaringan"}
];

function shuffle(array){
for(let i=array.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
}

function initGame(){
score=0;
lives=3;
document.getElementById("score").innerText=0;
document.getElementById("lives").innerText="‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";

const imgC=document.getElementById("imageContainer");
const funcC=document.getElementById("functionContainer");
imgC.innerHTML="";
funcC.innerHTML="";

let imgArr=[...perangkat];
let funcArr=[...perangkat];
shuffle(imgArr);
shuffle(funcArr);

imgArr.forEach(p=>{
let img=document.createElement("img");
img.src=p.img;
img.id=p.id;
img.draggable=true;
img.addEventListener("dragstart",e=>{
e.dataTransfer.setData("text",e.target.id);
});
imgC.appendChild(img);
});

funcArr.forEach(p=>{
let div=document.createElement("div");
div.className="dropzone";
div.setAttribute("data-match",p.id);
div.innerText=p.fungsi;
div.addEventListener("dragover",e=>e.preventDefault());
div.addEventListener("drop",drop);
funcC.appendChild(div);
});
}

function drop(e){
e.preventDefault();
if(lives<=0) return;

// ‚ùó Jika dropzone sudah terisi, tidak bisa diisi lagi
if(e.target.classList.contains("locked")) return;

const draggedId=e.dataTransfer.getData("text");
const correctMatch=e.target.getAttribute("data-match");
const draggedElement=document.getElementById(draggedId);

if(!draggedElement || draggedElement.classList.contains("used")) return;

if(draggedId===correctMatch){
e.target.classList.add("correct");
score+=100/perangkat.length;
}else{
e.target.classList.add("wrong");
lives--;
document.getElementById("lives").innerText="‚ù§Ô∏è".repeat(lives);
}

// üîí Kunci dropzone & gambar
e.target.classList.add("locked");
draggedElement.classList.add("used");
draggedElement.setAttribute("draggable",false);
draggedElement.style.opacity="0.4";

document.getElementById("score").innerText=Math.round(score);

if(lives===0){
alert("üíÄ Game Over!");
disableAll();
}

if(score>=100){
alert("üéâ Selamat! Semua benar!");
disableAll();
}
}

function disableAll(){
document.querySelectorAll("img").forEach(img=>{
img.setAttribute("draggable",false);
});
}

function resetGame(){
initGame();
}

function kirimNilai(){
let nama=document.getElementById("namaSiswa").value;
let skor=Math.round(score);

if(nama===""){
alert("Isi nama dulu!");
return;
}

const formURL="https://docs.google.com/forms/d/e/1FAIpQLSeTaxgtV0oJbgYPhFDgnLYzOi7Ip6tSzsSawIyXQIF_UcBXyg/formResponse";

const data=new FormData();
data.append("entry.726368855",nama);
data.append("entry.496330927",skor);

fetch(formURL,{
method:"POST",
mode:"no-cors",
body:data
}).then(()=>{
alert("‚úÖ Nilai berhasil dikirim!");
});
}

initGame();
</script>

</body>
</html>

