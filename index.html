<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Perangkat Jaringan - Informatika X</title>

<style>
body{
font-family:Arial;
background:linear-gradient(135deg,#1e3c72,#2a5298);
color:white;
text-align:center;
margin:0;
padding:20px;
overflow-x:hidden;
}

h1{margin-bottom:5px;}

.container{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:40px;
margin-top:20px;
position:relative;
}

.images,.functions{
display:flex;
flex-direction:column;
gap:12px;
}

.item{
background:white;
color:black;
padding:8px;
border-radius:10px;
cursor:pointer;
transition:0.3s;
}

.item img{
width:120px;
}

.item.selected{
border:3px solid orange;
}

.correct{background:#4caf50 !important;color:white;}
.wrong{background:#f44336 !important;color:white;}

#info{margin-top:15px;font-size:18px;}

input{
padding:8px;
border-radius:6px;
border:none;
}

button{
margin-top:10px;
padding:8px 15px;
border:none;
border-radius:6px;
cursor:pointer;
font-weight:bold;
}

canvas{
position:absolute;
top:0;
left:0;
pointer-events:none;
}

@media(max-width:768px){
.container{flex-direction:column;}
}
</style>
</head>
<body>

<h1>üì° Game Menjodohkan Perangkat Jaringan</h1>
<p>Klik gambar lalu klik fungsi yang sesuai</p>

<div>
Nama Siswa:
<input type="text" id="namaSiswa" placeholder="Masukkan nama">
</div>

<div id="info">
‚ù§Ô∏è Nyawa: <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> |
üéØ Skor: <span id="score">0</span>
</div>

<canvas id="canvas"></canvas>

<div class="container">
<div class="images" id="imageContainer"></div>
<div class="functions" id="functionContainer"></div>
</div>

<button onclick="resetGame()">Main Lagi</button>
<button onclick="kirimNilai()">Kirim Nilai</button>

<script>
let score=0;
let lives=3;
let selected=null;

const perangkat=[
{id:"router",img:"router.jpg",fungsi:"Menghubungkan dua jaringan berbeda"},
{id:"switch",img:"switch.jpg",fungsi:"Menghubungkan perangkat dalam LAN"},
{id:"modem",img:"modem.jpg",fungsi:"Mengubah sinyal digital & analog"},
{id:"accesspoint",img:"accesspoint.jpg",fungsi:"Menyediakan akses WiFi"},
{id:"repeater",img:"repeater.jpg",fungsi:"Memperkuat jangkauan sinyal"},
{id:"lancard",img:"lancard.jpg",fungsi:"Menghubungkan komputer ke jaringan"},
{id:"kabelutp",img:"kabelutp.jpg",fungsi:"Media transmisi kabel jaringan"}
];

function shuffle(array){
for(let i=array.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
}

function initGame(){
score=0;
lives=3;
selected=null;
document.getElementById("score").innerText=0;
document.getElementById("lives").innerText="‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";
document.getElementById("imageContainer").innerHTML="";
document.getElementById("functionContainer").innerHTML="";
clearCanvas();

let imgArr=[...perangkat];
let funcArr=[...perangkat];
shuffle(imgArr);
shuffle(funcArr);

imgArr.forEach(p=>{
let div=document.createElement("div");
div.className="item";
div.dataset.id=p.id;
div.innerHTML=`<img src="${p.img}"><br>${p.id.toUpperCase()}`;
div.onclick=()=>selectItem(div,"img");
imageContainer.appendChild(div);
});

funcArr.forEach(p=>{
let div=document.createElement("div");
div.className="item";
div.dataset.id=p.id;
div.innerText=p.fungsi;
div.onclick=()=>selectItem(div,"func");
functionContainer.appendChild(div);
});

resizeCanvas();
}

function selectItem(el,type){
if(lives<=0) return;
if(el.classList.contains("correct")) return;

if(!selected){
selected={el,type};
el.classList.add("selected");
}else{
if(selected.type!==type){
checkMatch(selected.el,el);
}
selected.el.classList.remove("selected");
selected=null;
}
}

function checkMatch(el1,el2){
let id1=el1.dataset.id;
let id2=el2.dataset.id;

if(id1===id2){

drawLine(el1,el2,"#00ff00");

el1.classList.add("correct");
el2.classList.add("correct");

score+=100/perangkat.length;

}else{

drawLine(el1,el2,"#ff0000");

lives--;
document.getElementById("lives").innerText="‚ù§Ô∏è".repeat(lives);

// gambar hilang
if(el1.querySelector("img")) el1.remove();
if(el2.querySelector("img")) el2.remove();

if(lives===0){
alert("üíÄ Game Over!");
}
}

document.getElementById("score").innerText=Math.round(score);

if(score>=100){
alert("üéâ Semua Jawaban Benar!");
}
}

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

function resizeCanvas(){
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
}
window.addEventListener("resize",resizeCanvas);

function drawLine(el1,el2,color){
const r1=el1.getBoundingClientRect();
const r2=el2.getBoundingClientRect();

ctx.strokeStyle=color;
ctx.lineWidth=3;
ctx.beginPath();
ctx.moveTo(r1.left+r1.width/2,r1.top+r1.height/2);
ctx.lineTo(r2.left+r2.width/2,r2.top+r2.height/2);
ctx.stroke();
}

function clearCanvas(){
ctx.clearRect(0,0,canvas.width,canvas.height);
}

function resetGame(){
initGame();
}

function kirimNilai(){
let nama=document.getElementById("namaSiswa").value;
let skor=Math.round(score);

if(nama===""){
alert("Isi nama dulu!");
return;
}

const formURL="https://docs.google.com/forms/d/e/1FAIpQLSeTaxgtV0oJbgYPhFDgnLYzOi7Ip6tSzsSawIyXQIF_UcBXyg/formResponse";

const data=new FormData();
data.append("entry.726368855",nama);
data.append("entry.496330927",skor);

fetch(formURL,{
method:"POST",
mode:"no-cors",
body:data
}).then(()=>{
alert("‚úÖ Nilai berhasil dikirim!");
});
}

initGame();
</script>

</body>
</html>
