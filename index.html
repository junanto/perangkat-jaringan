<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game Perangkat Jaringan - Informatika X</title>

<style>
body{
font-family:'Segoe UI',sans-serif;
background:#f4f6fb;
margin:0;
padding:20px;
text-align:center;
}

h1{
color:#333;
margin-bottom:5px;
}

.card{
max-width:1000px;
margin:auto;
background:white;
padding:20px;
border-radius:16px;
box-shadow:0 8px 25px rgba(0,0,0,0.1);
position:relative;
}

.topbar{
display:flex;
justify-content:space-between;
align-items:center;
flex-wrap:wrap;
margin-bottom:15px;
}

#info{
font-weight:bold;
}

.container{
display:flex;
justify-content:space-between;
gap:20px;
position:relative;
}

.locked{
pointer-events:none;
opacity:0.7;
}
  
.column{
width:48%;
display:flex;
flex-direction:column;
gap:12px;
}

.item{
background:#f1f3f9;
padding:10px;
border-radius:12px;
cursor:pointer;
transition:0.2s;
display:flex;
align-items:center;
justify-content:center;
min-height:70px;
}

.item img{
width:90px;
}

.item:hover{
transform:scale(1.03);
background:#e4e8f5;
}

.selected{
border:3px solid orange;
}

.correct{
background:#4caf50 !important;
color:white;
}

canvas{
position:absolute;
top:0;
left:0;
pointer-events:none;
}

button{
margin-top:15px;
padding:8px 15px;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
background:#4caf50;
color:white;
}

input{
padding:6px;
border-radius:6px;
border:1px solid #ccc;
}

@media(max-width:768px){
.container{
flex-direction:row; /* tetap sejajar */
}
.column{
width:48%;
}
.item img{
width:70px;
}
}
</style>
</head>
<body>

<h1>üì° Menjodohkan Perangkat Jaringan</h1>

<div class="card">

<div class="topbar">
<div>
Nama:
<input type="text" id="namaSiswa" placeholder="Masukkan nama">
</div>
<div id="info">
‚ù§Ô∏è <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span> |
üéØ <span id="score">0</span>
</div>
</div>

<canvas id="canvas"></canvas>

<div class="container">
<div class="column" id="imageColumn"></div>
<div class="column" id="functionColumn"></div>
</div>

<button onclick="resetGame()">Main Lagi</button>
<button onclick="kirimNilai()">Kirim Nilai</button>

</div>

<script>
let score=0;
let lives=3;
let selected=null;

const perangkat=[
{id:"router",img:"router.jpg",fungsi:"Menghubungkan dua jaringan berbeda"},
{id:"switch",img:"switch.jpg",fungsi:"Menghubungkan perangkat dalam LAN"},
{id:"modem",img:"modem.jpg",fungsi:"Mengubah sinyal digital & analog"},
{id:"accesspoint",img:"accesspoint.jpg",fungsi:"Menyediakan akses WiFi"},
{id:"repeater",img:"repeater.jpg",fungsi:"Memperkuat jangkauan sinyal"},
{id:"lancard",img:"lancard.jpg",fungsi:"Menghubungkan komputer ke jaringan"},
{id:"kabelutp",img:"kabelutp.jpg",fungsi:"Media transmisi kabel jaringan"}
];

function shuffle(array){
for(let i=array.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
}

function initGame(){
score=0;
lives=3;
selected=null;
document.getElementById("score").innerText=0;
document.getElementById("lives").innerText="‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è";
imageColumn.innerHTML="";
functionColumn.innerHTML="";
clearCanvas();

let imgArr=[...perangkat];
let funcArr=[...perangkat];
shuffle(imgArr);
shuffle(funcArr);

imgArr.forEach(p=>{
let div=document.createElement("div");
div.className="item";
div.dataset.id=p.id;
div.innerHTML=`<img src="${p.img}">`;
div.onclick=()=>selectItem(div,"img");
imageColumn.appendChild(div);
});

funcArr.forEach(p=>{
let div=document.createElement("div");
div.className="item";
div.dataset.id=p.id;
div.innerText=p.fungsi;
div.onclick=()=>selectItem(div,"func");
functionColumn.appendChild(div);
});

resizeCanvas();
}

function selectItem(el,type){
if(lives<=0) return;
if(el.classList.contains("correct")) return;

if(!selected){
selected={el,type};
el.classList.add("selected");
}else{
if(selected.type!==type){
checkMatch(selected.el,el);
}
selected.el.classList.remove("selected");
selected=null;
}
}

function checkMatch(el1,el2){

let id1=el1.dataset.id;
let id2=el2.dataset.id;

if(id1===id2){

    drawLine(el1,el2,"#4caf50");

    el1.classList.add("correct","locked");
    el2.classList.add("correct","locked");

    score+=100/perangkat.length;

}else{

    drawLine(el1,el2,"#f44336");

    el1.classList.add("wrong","locked");
    el2.classList.add("wrong","locked");

    lives--;
    document.getElementById("lives").innerText="‚ù§Ô∏è".repeat(lives);

    if(lives===0){
        alert("üíÄ Game Over!");
    }
}

document.getElementById("score").innerText=Math.round(score);

if(score>=100){
    alert("üéâ Semua Jawaban Benar!");
}
}


const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

function resizeCanvas(){
canvas.width=document.querySelector(".card").offsetWidth;
canvas.height=document.querySelector(".card").offsetHeight;
}
window.addEventListener("resize",resizeCanvas);

function drawLine(el1,el2,color){
const cardRect=document.querySelector(".card").getBoundingClientRect();
const r1=el1.getBoundingClientRect();
const r2=el2.getBoundingClientRect();

ctx.strokeStyle=color;
ctx.lineWidth=3;
ctx.beginPath();
ctx.moveTo(r1.left+r1.width/2-cardRect.left,r1.top+r1.height/2-cardRect.top);
ctx.lineTo(r2.left+r2.width/2-cardRect.left,r2.top+r2.height/2-cardRect.top);
ctx.stroke();
}

function clearCanvas(){
ctx.clearRect(0,0,canvas.width,canvas.height);
}

function resetGame(){
initGame();
}

function kirimNilai(){
let nama=document.getElementById("namaSiswa").value;
let skor=Math.round(score);

if(nama===""){
alert("Isi nama dulu!");
return;
}

const formURL="https://docs.google.com/forms/d/e/1FAIpQLSeTaxgtV0oJbgYPhFDgnLYzOi7Ip6tSzsSawIyXQIF_UcBXyg/formResponse";

const data=new FormData();
data.append("entry.726368855",nama);
data.append("entry.496330927",skor);

fetch(formURL,{
method:"POST",
mode:"no-cors",
body:data
}).then(()=>{
alert("‚úÖ Nilai berhasil dikirim!");
});
}

initGame();
</script>

</body>
</html>

